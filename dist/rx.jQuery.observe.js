(function(b){var a=function(d){if(typeof d!=="string"){return b.noop}switch(d){case"html":case"text":case"val":case"height":case"width":case"offset":case"css":return function(e){this[d](e)}}if(d.substr(0,1)==="@"){var c=d.substr(1);return function(e){this.attr(c,e)}}return function(e){this.css(d,e)}};b.fn.observe=function(c,d){if(typeof c!=="string"&&c!==null){d=c;c=null}else{if(c==="destroy"){return this.each(function(){var e=b(this);var f=e.data("observe");if(f){e.unbind("destroyed");b.each(f,function(g,h){h.Dispose()});e.removeData("observe")}})}}return this.each(function(){var g=b(this);var f=c||(g.is(":input")?"val":"text");var e=a(f);var h=g.data("observe");if(h&&h[f]){h[f].Dispose();delete h[f]}if(d){if(!h){h={};g.data("observe",h);g.bind("destroyed",function(){b(this).observe("destroy")})}h[f]=d.Subscribe({OnNext:function(i){e.call(g,i)},OnError:function(i){delete h[f]},OnDone:function(i){delete h[f]}})}})}})(jQuery);